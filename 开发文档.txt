# 音乐播放器应用开发文档

## 项目结构

- `script.js` - 主逻辑文件，包含音频管理、面板管理等功能
- `style.css` - 样式文件
- `index.html` - 主页面文件
- `background.js` - 背景效果管理

## 主要模块

### 1. 音频管理模块 (AudioManager)
- 负责音频上下文的创建和管理
- 提供音符播放功能
- 处理音频设置（音量、波形等）

### 2. 面板管理模块 (PanelManager)
- 管理播放模式面板的显示/隐藏
- 实现面板按钮的拖拽功能
- 保存和恢复面板位置

### 3. 钢琴控制模块 (PianoController)
- 处理钢琴键盘事件
- 管理钢琴设置
- 处理音符播放

## 功能说明

### 音频播放
- 支持多种波形（sine, square, sawtooth, triangle）
- 音量控制
- 自动音频上下文激活

### 用户界面
- 可拖拽的播放模式按钮
- 自动保存按钮位置
- 响应式布局

## 开发指南

1. 确保所有依赖文件正确加载
2. 使用 `document.addEventListener('DOMContentLoaded', ...)` 确保DOM加载完成
3. 调试时检查控制台错误信息
4. 使用 `localStorage` 保存用户设置

## 已知问题
- 某些浏览器可能需要用户交互才能激活音频
- 移动端拖拽功能可能需要额外处理

## 未来改进
- 添加更多音效
- 实现录音功能
- 支持MIDI设备输入